<header>
    <nav>
        <a href="/" class="logo">
            <img src="/static/banana.svg" alt="la banane pixélisée" style="height: 1.5rem; width: auto; vertical-align: middle; margin-right: 0.5rem;">
            la banane pixélisée
        </a>
        <div class="nav-links">
            <a href="/" {% if active_page == 'home' %}class="active"{% endif %}>Accueil</a>
            <a href="/media" {% if active_page == 'media' %}class="active"{% endif %}>Médias</a>
            <a href="/libraries" {% if active_page == 'libraries' %}class="active"{% endif %}>Vidéothèques</a>
            <a href="/persons" {% if active_page == 'persons' %}class="active"{% endif %}>Personnes</a>
            <a href="/genres" {% if active_page == 'genres' %}class="active"{% endif %}>Genres</a>
            <a href="/franchises" {% if active_page == 'franchises' %}class="active"{% endif %}>Franchises</a>
            <a href="/users" {% if active_page == 'users' %}class="active"{% endif %}>Utilisateurs</a>
            <span class="divider"></span>
            <button id="theme-toggle" onclick="toggleTheme()">Sombre</button>
            <span id="auth-section">
                {% if current_user %}
                    <a href="{{ url_for('profile.profile') }}">Profil</a>
                    {% if current_user.role == 'admin' %}
                        <a href="{{ url_for('admin.admin') }}">Admin</a>
                    {% elif current_user.role == 'trusted' %}
                        <a href="{{ url_for('admin.admin') }}">Trusted</a>
                    {% endif %}
                    <a href="{{ url_for('auth.logout') }}">Déconnexion</a>
                {% else %}
                    <a href="{{ url_for('auth.login') }}">Connexion</a>
                    <a href="{{ url_for('auth.register') }}">Inscription</a>
                {% endif %}
            </span>
        </div>
        <button class="menu-toggle" onclick="document.querySelector('nav').classList.toggle('open')">☰</button>
    </nav>
</header>

<script>
if (localStorage.getItem('theme') === 'dark') {
    document.body.classList.add('dark');
    document.getElementById('theme-toggle').textContent = 'Claire';
}
function toggleTheme() {
    document.body.classList.toggle('dark');
    const isDark = document.body.classList.contains('dark');
    document.getElementById('theme-toggle').textContent = isDark ? 'Claire' : 'Sombre';
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
}
</script>
